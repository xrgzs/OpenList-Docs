import{_ as y}from"./ValaxyMain.CtJ9ABuU.js";import"./chunks/nprogress.Dc4I04tj.js";import{d as E,u as m,a as f}from"./chunks/vue-router.BcHWI9ol.js";import{a0 as b,a2 as n,W as v,$ as x,a1 as w,a3 as t,a5 as s,a6 as i,U as o,Y as D}from"./framework.B7Ju9fZD.js";import"./app.BdiGwHzk.js";import"./chunks/dayjs.BX5x0S-s.js";import"./chunks/vue-i18n.CQ-esRMe.js";import"./chunks/pinia.CGlxtBKU.js";/* empty css                    */const A="/OpenList-Docs/img/guide/reverse_proxy/bt_new_website.png",C="/OpenList-Docs/img/guide/reverse_proxy/bt_new_website_01.png",F="/OpenList-Docs/img/guide/reverse_proxy/bt_delete_default_config_01.png",$="/OpenList-Docs/img/guide/reverse_proxy/bt_delete_default_config_02.png",u="/OpenList-Docs/img/guide/reverse_proxy/bt_reverse_proxy.png",P={lang:"en"},H={class:"warning custom-block"},_={class:"custom-block-title custom-block-title-default"},N={lang:"zh-CN"},z={class:"warning custom-block"},S={class:"custom-block-title custom-block-title-default"},R={lang:"en"},L={class:"warning custom-block"},I={class:"custom-block-title custom-block-title-default"},T={lang:"zh-CN"},O={class:"warning custom-block"},V={class:"custom-block-title custom-block-title-default"},B=E("/guide/installation/reverse-proxy",async r=>JSON.parse('{"title":{"en":"Reverse proxy","zh-CN":"反向代理"},"description":"","frontmatter":{"title":{"en":"Reverse proxy","zh-CN":"反向代理"},"icon":"iconfont icon-page","top":10,"categories":["guide","installation"],"tag":["Install","Guide"],"sticky":true,"star":true},"headers":[],"relativePath":"pages/guide/installation/reverse-proxy.md","lastUpdated":1753507207000}'),{lazy:(r,d)=>r.name===d.name}),Q={__name:"reverse-proxy",setup(r,{expose:d}){const{data:h}=B(),g=f(),k=m(),p=Object.assign(k.meta.frontmatter||{},h.value?.frontmatter||{});return g.currentRoute.value.data=h.value,D("valaxy:frontmatter",p),globalThis.$frontmatter=p,d({frontmatter:{title:{en:"Reverse proxy","zh-CN":"反向代理"},icon:"iconfont icon-page",top:10,categories:["guide","installation"],tag:["Install","Guide"],sticky:!0,star:!0}}),(e,l)=>{const a=x("VT"),c=y;return w(),b(c,{frontmatter:v(p)},{"main-content-md":n(()=>[s("div",P,[l[2]||(l[2]=s("p",null,"OpenList listens to port 5244 by default. If modified, please also update the port number in the configuration below.",-1)),l[3]||(l[3]=s("p",null,[i("If you are using "),s("strong",null,"reverse proxy"),i(", please ensure that the correct "),s("code",null,"Host"),i(" header is passed, as OpenList will generate the URL based on this information.")],-1)),l[4]||(l[4]=s("p",null,[i("If the "),s("code",null,"Host"),i(" header is unavailable, you can use the higher-priority "),s("code",null,"X-Forwarded-Host"),i(" header (non-standard header). If the issue persists, configure the "),s("a",{href:"./../../configuration/configuration#site_url"},"site_url"),i(".")],-1)),l[5]||(l[5]=s("p",null,[i("If you want to use a "),s("strong",null,"sub folder"),i(", you should configure the "),s("a",{href:"./../../configuration/configuration#site_url"},"site_url"),i(". Refer to "),s("a",{href:"./../../faq/howto#how-to-reverse-proxy-with-sub-directory"},"reverse proxy with sub folder"),i(".")],-1)),s("div",H,[s("p",_,[l[0]||(l[0]=s("i",{class:"icon i-carbon-warning-alt"},null,-1)),o(a,{content:"blocks.warning"})]),l[1]||(l[1]=s("p",null,[i("If you need to proxy to a non-standard port, make sure to pass the "),s("code",null,"domain:port"),i(" information through the "),s("code",null,"Host"),i(" or "),s("code",null,"X-Forwarded-Host"),i(" header, otherwise the port will be lost in URLs!")],-1))])]),s("div",N,[l[8]||(l[8]=s("p",null,"OpenList 默认监听 5244 端口。如有修改，请一并修改下列配置中的端口号。",-1)),l[9]||(l[9]=s("p",null,[i("如果您使用"),s("strong",null,"反向代理"),i("，请确保传递正确的 "),s("code",null,"Host"),i(" 、 "),s("code",null,"X-Forwarded-Proto"),i(" 头部信息，OpenList 将根据该信息生成 URL 地址。")],-1)),l[10]||(l[10]=s("p",null,[i("如果 "),s("code",null,"Host"),i(" 头不可用，您可以使用优先级更高的 "),s("code",null,"X-Forwarded-Host"),i("（非标准头部）。如果问题仍然存在，请通过配置 "),s("a",{href:"./../../configuration/configuration#site_url"},"site_url"),i(" 进行设置。")],-1)),l[11]||(l[11]=s("p",null,[i("如果你想使用"),s("strong",null,"子目录"),i("，请通过配置 "),s("a",{href:"./../../configuration/configuration#site_url"},"site_url"),i(" 进行设置。参考 "),s("a",{href:"./../../faq/howto#如何对子目录进行反向代理"},"如何对子目录进行反向代理"),i("。")],-1)),s("div",z,[s("p",S,[l[6]||(l[6]=s("i",{class:"icon i-carbon-warning-alt"},null,-1)),o(a,{content:"blocks.warning"})]),l[7]||(l[7]=s("p",null,[i("如果需要"),s("strong",null,"反向代理"),i("到"),s("strong",null,"非标准端口"),i("，请务必通过 "),s("code",null,"Host"),i(" 或 "),s("code",null,"X-Forwarded-Host"),i(" 标头传递实际访问的 "),s("code",null,"域名:端口"),i(" 信息，否则会导致获取到的链接丢失端口！")],-1))])]),l[22]||(l[22]=s("h2",{id:"nginx",tabindex:"-1"},[i("nginx "),s("a",{class:"header-anchor",href:"#nginx","aria-label":'Permalink to "nginx"'},"​")],-1)),l[23]||(l[23]=s("p",null,[s("a",{href:"https://nginx.org/en/docs/http/ngx_http_proxy_module.html",target:"_blank",rel:"noreferrer"},"https://nginx.org/en/docs/http/ngx_http_proxy_module.html")],-1)),l[24]||(l[24]=s("div",{lang:"en"},[s("p",null,[i("Add in the "),s("code",null,"server"),i(" field of the website configuration file:")])],-1)),l[25]||(l[25]=s("div",{lang:"zh-CN"},[s("p",null,[i("在网站配置文件的 "),s("code",null,"server"),i(" 字段中添加：")])],-1)),l[26]||(l[26]=s("div",{class:"language-nginx"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"nginx"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"location"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," / "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_set_header "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"X-Forwarded-For $proxy_add_x_forwarded_for;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_set_header "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"X-Forwarded-Proto $scheme;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_set_header "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Host $http_host;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_set_header "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"X-Real-IP $remote_addr;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_set_header "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Range $http_range;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_set_header "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"If-Range $http_if_range;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_redirect "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"off"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_pass "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"http://127.0.0.1:5244;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_http_version "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1.1"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # the max size of file to upload")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  client_max_body_size "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20000m"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),s("button",{class:"collapse"})],-1)),s("div",R,[s("div",L,[s("p",I,[l[12]||(l[12]=s("i",{class:"icon i-carbon-warning-alt"},null,-1)),o(a,{content:"blocks.warning"})]),l[13]||(l[13]=s("p",null,"If you use the aaPanel, be sure to delete the following default configuration:",-1)),l[14]||(l[14]=s("div",{class:"language-nginx"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"nginx"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"location"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ^/(\\.user.ini|\\.htaccess|\\.git|\\.svn|\\.project|LICENSE|README.md")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"location"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," .\\*\\.(gif|jpg|jpeg|png|bmp|swf)$")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"location"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," .\\*\\.(js|css)?$")])])]),s("button",{class:"collapse"})],-1)),l[15]||(l[15]=s("p",null,[i("Disable Nginx caching in "),s("code",null,"/www/server/nginx/conf/proxy.conf"),i(" or the corresponding website configuration file. Otherwise, with the default configuration, when accessing large files, Nginx will attempt to cache the remote file locally first, resulting in playback failures.")],-1)),l[16]||(l[16]=s("div",{class:"language-nginx"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"nginx"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"proxy_cache "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cache_one; "),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Remove this line")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"proxy_max_temp_file_size "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; "),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Add this line")])])]),s("button",{class:"collapse"})],-1))])]),s("div",T,[s("div",O,[s("p",V,[l[17]||(l[17]=s("i",{class:"icon i-carbon-warning-alt"},null,-1)),o(a,{content:"blocks.warning"})]),l[18]||(l[18]=s("p",null,"如果使用宝塔面板，请务必删除以下默认配置：",-1)),l[19]||(l[19]=s("div",{class:"language-nginx"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"nginx"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"location"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ^/(\\.user.ini|\\.htaccess|\\.git|\\.svn|\\.project|LICENSE|README.md")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"location"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," .\\*\\.(gif|jpg|jpeg|png|bmp|swf)$")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"location"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ~"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," .\\*\\.(js|css)?$")])])]),s("button",{class:"collapse"})],-1)),l[20]||(l[20]=s("p",null,[i("并在"),s("code",null,"/www/server/nginx/conf/proxy.conf"),i("中或对应网站配置文件中设置禁用 nginx 缓存，否则默认配置下访问较大文件时 nginx 会先尝试将远程文件缓存至本机，导致播放失败")],-1)),l[21]||(l[21]=s("div",{class:"language-nginx"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"nginx"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"proxy_cache "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cache_one; "),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 删除这一行")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"proxy_max_temp_file_size "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; "),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"#加上这一行")])])]),s("button",{class:"collapse"})],-1))])]),l[27]||(l[27]=s("div",{lang:"en"},[s("p",null,"::: note Nginx Host Variables Differences"),s("table",null,[s("thead",null,[s("tr",null,[s("th",null,"Variable"),s("th",null,"Description"),s("th",null,"Includes Port"),s("th",null,"Notes")])]),s("tbody",null,[s("tr",null,[s("td",null,[s("code",null,"$http_host")]),s("td",null,[i("The original "),s("code",null,"Host"),i(" request header")]),s("td",null,"Yes"),s("td",null,[i("If the "),s("code",null,"Host"),i(" request header is missing, the value will be empty; not recommended for best practices")])]),s("tr",null,[s("td",null,[s("code",null,"$host")]),s("td",null,[i("Server name from the "),s("code",null,"Host"),i(" request header field")]),s("td",null,"No"),s("td",null,[i("Defaults to the server’s "),s("code",null,"server_name"),i(" if "),s("code",null,"Host"),i(" field is missing")])]),s("tr",null,[s("td",null,[s("code",null,"$host:$server_port")]),s("td",null,"Server name + port"),s("td",null,"Yes"),s("td",null,"Use this combination when you need to use a non-default port (other than 80 or 443)")])])])],-1)),l[28]||(l[28]=s("div",{lang:"zh-CN"},[s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},[s("i",{class:"icon i-carbon-thumbs-up"}),i("Nginx 主机变量区别")]),s("table",null,[s("thead",null,[s("tr",null,[s("th",null,"变量"),s("th",null,"内容"),s("th",null,"是否包含端口号"),s("th",null,"备注")])]),s("tbody",null,[s("tr",null,[s("td",null,[s("code",null,"$http_host")]),s("td",null,[i("原始的 "),s("code",null,"Host"),i(" 请求标头")]),s("td",null,"是"),s("td",null,[i("如果 "),s("code",null,"Host"),i(" 请求标头缺失，值为空，不符合最佳实践")])]),s("tr",null,[s("td",null,[s("code",null,"$host")]),s("td",null,[s("code",null,"Host"),i(" 请求标头字段中的服务器名称")]),s("td",null,"否"),s("td",null,[i("在没有 "),s("code",null,"Host"),i(" 字段时，默认使用服务器的 "),s("code",null,"server_name")])]),s("tr",null,[s("td",null,[s("code",null,"$host:$server_port")]),s("td",null,"服务器名称 + 端口"),s("td",null,"是"),s("td",null,"当需要使用非默认 80、443 端口时，请修改为这个组合")])])])])],-1)),l[29]||(l[29]=s("div",{lang:"en"},[s("p",null,[i("If HTTP/3 is needed, the corresponding "),s("code",null,"Host"),i(" line should be modified to:")]),s("div",{class:"language-nginx"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"nginx"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"proxy_set_header "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Host $host:$server_port;")])])]),s("button",{class:"collapse"})]),s("p",null,"This modified configuration will be compatible with requests using HTTP/2 or lower versions.")],-1)),l[30]||(l[30]=s("div",{lang:"zh-CN"},[s("p",null,[i("如果需要使用 HTTP/3，需要将对应 "),s("code",null,"Host"),i(" 行修改为：")]),s("div",{class:"language-nginx"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"nginx"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"proxy_set_header "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Host $host:$server_port;")])])]),s("button",{class:"collapse"})]),s("p",null,"这样修改后的配置同时也可以兼容 HTTP/2 及更低版本的请求。")],-1)),l[31]||(l[31]=s("h2",{id:"apache",tabindex:"-1"},[i("Apache "),s("a",{class:"header-anchor",href:"#apache","aria-label":'Permalink to "Apache"'},"​")],-1)),l[32]||(l[32]=s("div",{lang:"en"},[s("p",null,[i("Add the anti-generation configuration item "),s("code",null,"ProxyPass"),i(" under the "),s("code",null,"VirtualHost"),i(" field, such as:")]),s("div",{class:"language-xml"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"xml"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"VirtualHost"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," *:80>")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ServerName myapp.example.com")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ServerAdmin webmaster@example.com")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    DocumentRoot /www/myapp/public")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    AllowEncodedSlashes NoDecode")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ProxyPreserveHost On")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'    ProxyPass "/" "http://127.0.0.1:5244/" nocanon')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'    ProxyPassReverse "/" "http://127.0.0.1:5244/" nocanon')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"</"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"VirtualHost"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")])])]),s("button",{class:"collapse"})])],-1)),l[33]||(l[33]=s("div",{lang:"zh-CN"},[s("p",null,[i("在 "),s("code",null,"VirtualHost"),i(" 字段下添加配置项 "),s("code",null,"ProxyPass"),i("，如：")]),s("div",{class:"language-xml"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"xml"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"VirtualHost"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," *:80>")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ServerName myapp.example.com")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ServerAdmin webmaster@example.com")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    DocumentRoot /www/myapp/public")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    AllowEncodedSlashes NoDecode")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ProxyPreserveHost On")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'    ProxyPass "/" "http://127.0.0.1:5244/" nocanon')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'    ProxyPassReverse "/" "http://127.0.0.1:5244/" nocanon')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"</"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"VirtualHost"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")])])]),s("button",{class:"collapse"})])],-1)),l[34]||(l[34]=s("h2",{id:"caddy",tabindex:"-1"},[i("Caddy "),s("a",{class:"header-anchor",href:"#caddy","aria-label":'Permalink to "Caddy"'},"​")],-1)),l[35]||(l[35]=s("div",{lang:"en"},[s("p",null,[i("Add the reverse proxy configuration item "),s("code",null,"reverse_proxy"),i(" under the "),s("code",null,"Caddyfile"),i(" file, for example:")])],-1)),l[36]||(l[36]=s("div",{lang:"zh-CN"},[s("p",null,[i("在 "),s("code",null,"Caddyfile"),i(" 文件下添加 "),s("code",null,"reverse_proxy"),i(" 反向代理配置项，如：")])],-1)),l[37]||(l[37]=s("div",{class:"language-"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,":80 {")]),i(`
`),s("span",{class:"line"},[s("span",null,"  reverse_proxy 127.0.0.1:5244")]),i(`
`),s("span",{class:"line"},[s("span",null,"}")])])]),s("button",{class:"collapse"})],-1)),l[38]||(l[38]=s("div",{lang:"en"},[s("p",null,"If deployed on a server that is functioning properly on port 443 and accessed using a domain name, it is recommended to use this configuration to let Caddy automatically request a certificate:"),s("p",null,"（Replace example.com with your own resolved domain name）")],-1)),l[39]||(l[39]=s("div",{lang:"zh-CN"},[s("p",null,"如果部署在 443 端口正常使用的服务器上且使用域名进行访问，建议使用这种配置让 Caddy 自动申请证书："),s("p",null,[i("（将 "),s("code",null,"example.com"),i(" 替换为你自己解析后的域名）")])],-1)),l[40]||(l[40]=s("div",{class:"language-"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"example.com {")]),i(`
`),s("span",{class:"line"},[s("span",null,"  reverse_proxy 127.0.0.1:5244")]),i(`
`),s("span",{class:"line"},[s("span",null,"}")])])]),s("button",{class:"collapse"})],-1)),l[41]||(l[41]=s("h2",{lang:"en",id:"tutorial-setting-up-reverse-proxy-in-aapanel",tabindex:"-1"},[i("Tutorial: Setting up Reverse Proxy in aaPanel "),s("a",{class:"header-anchor",href:"#tutorial-setting-up-reverse-proxy-in-aapanel","aria-label":'Permalink to "Tutorial: Setting up Reverse Proxy in aaPanel { lang="en" }"'},"​")],-1)),l[42]||(l[42]=s("h2",{lang:"zh-CN",id:"教程-宝塔面板设置反向代理",tabindex:"-1"},[i("教程：宝塔面板设置反向代理 "),s("a",{class:"header-anchor",href:"#教程-宝塔面板设置反向代理","aria-label":'Permalink to "教程：宝塔面板设置反向代理 { lang="zh-CN" }"'},"​")],-1)),l[43]||(l[43]=s("div",{lang:"en"},[s("ol",null,[s("li",null,"Login to the aaPanel and add a new website.")]),s("p",null,"::"),s("div",{lang:"zh-CN"},[s("ol",null,[s("li",null,"登录宝塔面板，添加站点；")])])],-1)),l[44]||(l[44]=s("figure",null,[s("img",{src:A,alt:"bt_new_website",loading:"lazy",decoding:"async"})],-1)),l[45]||(l[45]=s("div",{lang:"en"},[s("ol",{start:"2"},[s("li",null,"Modify the website settings.")])],-1)),l[46]||(l[46]=s("div",{lang:"zh-CN"},[s("ol",{start:"2"},[s("li",null,"修改站点设置；")])],-1)),l[47]||(l[47]=s("figure",null,[s("img",{src:C,alt:"bt_new_website_01",loading:"lazy",decoding:"async"})],-1)),l[48]||(l[48]=s("div",{lang:"en"},[s("ol",{start:"3"},[s("li",null,"Remove the default panel code.")])],-1)),l[49]||(l[49]=s("div",{lang:"zh-CN"},[s("ol",{start:"3"},[s("li",null,"删除面板默认代码；")])],-1)),l[50]||(l[50]=s("p",null,[s("img",{src:F,alt:"bt_delete_default_config_01"}),s("img",{src:$,alt:"bt_delete_default_config_02"})],-1)),l[51]||(l[51]=s("div",{lang:"en"},[s("ol",{start:"4"},[s("li",null,"Add the reverse proxy.")])],-1)),l[52]||(l[52]=s("div",{lang:"zh-CN"},[s("ol",{start:"4"},[s("li",null,"添加反向代理；")])],-1)),l[53]||(l[53]=s("figure",null,[s("img",{src:u,alt:"bt_reverse_proxy",loading:"lazy",decoding:"async"})],-1)),l[54]||(l[54]=s("div",{lang:"en"},[s("blockquote",null,[s("p",null,[i("If you need to apply for an "),s("code",null,"SSL certificate"),i(", you can first apply for the certificate in the "),s("code",null,"SSL"),i(" option, and then set up the reverse proxy. Alternatively, you can set up the reverse proxy first, disable the proxy function, apply for an "),s("code",null,"SSL"),i(" certificate, and then enable the proxy again.")])])],-1)),l[55]||(l[55]=s("div",{lang:"zh-CN"},[s("figure",null,[s("img",{src:u,alt:"bt_reverse_proxy",loading:"lazy",decoding:"async"})]),s("blockquote",null,[s("p",null,[i("如需申请"),s("code",null,"SSL"),i("证书，可先在"),s("code",null,"SSL"),i("选项中申请证书，然后在设置反向代理。或者设置反向代理之后，关闭反向代理功能，申请"),s("code",null,"SSL"),i("证书后再次开启代理。")])])],-1))]),"main-header":n(()=>[t(e.$slots,"main-header")]),"main-header-after":n(()=>[t(e.$slots,"main-header-after")]),"main-nav":n(()=>[t(e.$slots,"main-nav")]),"main-content-before":n(()=>[t(e.$slots,"main-content-before")]),"main-content":n(()=>[t(e.$slots,"main-content")]),"main-content-after":n(()=>[t(e.$slots,"main-content-after")]),"main-nav-before":n(()=>[t(e.$slots,"main-nav-before")]),"main-nav-after":n(()=>[t(e.$slots,"main-nav-after")]),comment:n(()=>[t(e.$slots,"comment")]),footer:n(()=>[t(e.$slots,"footer")]),aside:n(()=>[t(e.$slots,"aside")]),"aside-custom":n(()=>[t(e.$slots,"aside-custom")]),default:n(()=>[t(e.$slots,"default")]),_:3},8,["frontmatter"])}}};export{Q as default,B as usePageData};

import"./chunks/nprogress.Dc4I04tj.js";import{O as z,v as m,x as b,S as O,T as $,a8 as c,a1 as u,a5 as _,a4 as h,a9 as D,ab as I,Z as V}from"./framework.B7Ju9fZD.js";const H={class:"bilibili-wrapper"},A={class:"bilibili-desc"},C=["href"],Q=["src","title"],U={key:1,class:"loading-icon"},w="https://player.bilibili.com/player.html",W="accelerometer; autoplay; clipboard-write; encrypted-media; fullscreen; gyroscope; picture-in-picture",q=z({__name:"BiliBili",props:{bvid:{},aid:{},cid:{},title:{default:"A BiliBili video"},page:{default:1},width:{default:"100%"},height:{},ratio:{default:16/9},time:{default:0},autoplay:{type:Boolean,default:!1},lowQuality:{type:Boolean,default:!1},noDanmaku:{type:Boolean,default:!1}},setup(N){const o=N,a=m(),p=m(!1),v=m("auto"),r=b(()=>{const{aid:e,bvid:t,cid:s,autoplay:d,time:E,page:y,lowQuality:R,noDanmaku:x}=o;if(!e&&!t)return null;let f="";const i=new URLSearchParams;if(e&&s)f=w,i.set("aid",String(e)),i.set("cid",String(s)),i.set("p",String(y));else if(t)f=w,i.set("bvid",String(t)),i.set("p",String(y));else return null;return i.set("t",String(E)),i.set("autoplay",d?"1":"0"),R&&i.set("quality","16"),x&&i.set("danmaku","0"),`${f}?${i.toString()}`}),g=e=>{if(typeof e=="number")return`${e}px`;if(typeof e=="string"){if(e.includes("%")||e.includes("px")||e.includes("em")||e.includes("rem"))return e;const t=parseFloat(e);return isNaN(t)?e:`${t}px`}return"100%"},S=b(()=>g(o.width)),k=e=>{if(typeof e=="string"){const[t,s]=e.split(":"),d=Number(t)/Number(s);if(!Number.isNaN(d))return d}return typeof e=="number"?e:16/9},B=e=>{const t=o.height,s=k(o.ratio);return t?g(t):`${Number(e)/s}px`},n=()=>{a.value&&(v.value=B(a.value.clientWidth))},L=()=>{p.value=!0,n()};let l=null;return O(()=>{n(),window.ResizeObserver&&a.value&&(l=new ResizeObserver(n),l.observe(a.value.parentElement)),window.addEventListener("resize",n),window.addEventListener("orientationchange",n)}),$(()=>{l&&l.disconnect(),window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}),(e,t)=>(u(),c("div",H,[_("div",A,[r.value?(u(),c("a",{key:0,class:"sr-only",href:r.value},D(e.title),9,C)):h("v-if",!0)]),r.value?(u(),c("iframe",{key:0,ref_key:"iframeRef",ref:a,src:r.value,title:e.title,class:"bilibili-iframe",allow:W,style:I({width:S.value,height:p.value?v.value:0}),onLoad:L},null,44,Q)):h("v-if",!0),p.value?h("v-if",!0):(u(),c("div",U,t[0]||(t[0]=[_("div",{class:"spinner"},null,-1)])))]))}}),M=V(q,[["__scopeId","data-v-cfc3e35d"]]);export{M as _};
